<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Woofmen æ±ªå€‘æ¯›å­©æ²™é¾æ‰€ | æ¡ƒåœ’é’åŸ”æ—¥ç³»å¯µç‰©ç¾å®¹</title>
    <link rel="icon" href="logo.png" type="image/png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.7/dist/signature_pad.umd.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = { 
            theme: {
                extend: {
                    colors: {
                        theme: {
                            bg: '#FBF9F6', 
                            brown: '#A68A7C',
                            brownDeep: '#8D6E63',
                            yellow: '#E6C88A',
                            yellowLight: '#F5E9D0',
                            blue: '#B5CAD4',
                            text: '#7C604E',
                            sub: '#A9998E',
                        }
                    },
                    fontFamily: {
                        sans: ['"Zen Maru Gothic"', 'sans-serif'],
                        serif: ['"Zen Maru Gothic"', 'serif'],
                    },
                    boxShadow: {
                        'cute': '4px 4px 0px 0px #D6C6BA',
                        'cute-hover': '6px 6px 0px 0px #C9B6A9',
                        'cute-sm': '3px 3px 0px 0px #D6C6BA',
                        'cute-sm-hover': '4px 4px 0px 0px #C9B6A9',
                    },
                    backgroundImage: {
                        'gradient-brand': 'linear-gradient(135deg, #B39A8C 0%, #E6C88A 100%)',
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.8s ease-out forwards',
                        'slide-up': 'slideUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards',
                        'float': 'float 4s ease-in-out infinite',
                    },
                    keyframes: {
                        fadeIn: { from: { opacity: '0' }, to: { opacity: '1' } },
                        slideUp: { from: { opacity: '0', transform: 'translateY(40px)' }, to: { opacity: '1', transform: 'translateY(0)' } },
                        float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-10px)' } },
                    }
                }
            }
        }
    </script>

<style type="text/tailwindcss">
@layer base {
  body {
    background-color: #FBF9F6;
    background-image:
      radial-gradient(circle at 10% 20%, rgba(179,154,140,0.1) 0%, transparent 40%),
      radial-gradient(circle at 90% 80%, rgba(230,200,138,0.1) 0%, transparent 40%);
    font-family: 'Zen Maru Gothic', sans-serif;
    color: #7C604E;
    -webkit-font-smoothing: antialiased;
  }
}

@layer components {
  .card-panel {
    @apply bg-[#FFFCF7] border-2 border-[#D6C6BA] rounded-2xl 
           shadow-[4px_4px_0_0_#D6C6BA] transition;
  }
  .card-panel:hover {
    @apply -translate-x-0.5 -translate-y-0.5 shadow-[6px_6px_0_0_#C9B6A9];
  }

  .btn-card {
    @apply bg-white/70 border-2 border-[#EAE2D9] rounded-2xl 
           shadow-[3px_3px_0_0_#D6C6BA] transition;
  }
  .btn-card:hover {
    @apply bg-white border-[#B39A8C] -translate-x-0.5 -translate-y-0.5 
           shadow-[4px_4px_0_0_#C9B6A9];
  }

  .form-input {
    @apply w-full px-4 py-3 rounded-2xl border-2 border-[#EAE2D9] 
           bg-white/90 text-[#7C604E] outline-none transition;
  }
  .form-input:focus {
    @apply border-[#A68A7C] ring-2 ring-[#A68A7C]/20;
  }

  .reveal-item {
    @apply opacity-0;
    animation: slideUp 0.8s cubic-bezier(0.2,0.8,0.2,1) forwards;
  }

  .history-btn {
    @apply px-3 py-1 rounded-full text-xs font-bold border border-[#EAE2D9] 
           bg-white text-[#7C604E] transition;
  }
  .history-btn.active {
    @apply bg-[#A68A7C] text-white border-[#A68A7C];
  }

  .pill-option { @apply inline-flex items-center cursor-pointer; }
  .pill-option input { @apply absolute opacity-0 pointer-events-none; }
  .pill-option span {
    @apply inline-flex items-center justify-center px-3 py-1 rounded-full 
           border border-[#E6D7CB] bg-white text-[#7C604E] text-[13px] 
           font-bold transition;
  }
  .pill-option span:hover { @apply bg-[#F9F4EE] border-[#A68A7C]; }
  .pill-option input:checked + span {
    @apply bg-[#A68A7C] text-white border-[#A68A7C];
  }
  .pill-option--big span { @apply px-4 py-2 text-sm; }

  .choice-card { @apply block cursor-pointer; }
  .choice-card input { @apply absolute opacity-0 pointer-events-none; }
  .choice-card__body {
    @apply flex items-start gap-2 px-3 py-3 rounded-2xl border-2 
           border-[#EAE2D9] bg-white text-[#7C604E] font-semibold transition;
  }
  .choice-card__body:hover {
    @apply border-[#A68A7C] bg-[#F9F4EE];
  }
  .choice-card input:checked + .choice-card__body {
    @apply border-[#A68A7C] bg-[#F5E9D0] shadow-[0_6px_14px_rgba(166,138,124,0.2)];
  }

  .photo-choice { @apply grid grid-cols-2 gap-2; }
  .photo-card { @apply cursor-pointer block; }
  .photo-card input { @apply absolute opacity-0 pointer-events-none; }
  .photo-card__body {
    @apply flex items-center gap-2 px-3 py-3 rounded-2xl border-2 
           border-[#EAE2D9] bg-white font-bold text-[#7C604E] transition;
  }
  .photo-card__body i { @apply text-[#A68A7C]; }
  .photo-card__body .badge {
    @apply ml-auto text-[11px] font-extrabold px-2 py-1 rounded-full 
           bg-[#F5E9D0] text-[#8D6E63];
  }
  .photo-card input:checked + .photo-card__body {
    @apply text-white border-[#A68A7C];
    background: linear-gradient(135deg,#A68A7C,#E6C88A);
    box-shadow: 0 10px 20px rgba(166,138,124,.25);
  }
  .photo-card input:checked + .photo-card__body i { @apply text-white; }
  .photo-card input:checked + .photo-card__body .badge {
    @apply text-white;
    background: rgba(255,255,255,.2);
    border: 1px solid rgba(255,255,255,.4);
  }

  .notice-card {
    background: linear-gradient(135deg,#FFF9F1,#FFF2DF);
    border: 1.5px solid #EAD9C9;
    box-shadow: 0 10px 25px rgba(166,138,124,.15);
    position: relative;
    overflow: hidden;
  }
  .notice-card::after {
    content:"";
    position:absolute;
    top:-60px; right:-40px;
    width:160px; height:160px;
    background: radial-gradient(circle, rgba(230,200,138,.35), transparent 65%);
    opacity:.6;
  }
  .notice-header { @apply flex items-center gap-2; }
  .notice-icon {
    @apply w-9 h-9 rounded-xl flex items-center justify-center text-white;
    background: linear-gradient(135deg,#A68A7C,#E6C88A);
    box-shadow: 0 6px 14px rgba(166,138,124,.25);
  }
  .notice-title { @apply text-sm font-black text-[#7C604E]; }
  .notice-sub { @apply text-[13px] text-[#8A6F5B] mt-1 leading-relaxed; }
  .notice-ack {
    @apply mt-3 px-3 py-2 rounded-xl flex items-center gap-2;
    background: #FFF6EA;
  }

  .section-pill {
    @apply inline-flex items-center gap-2 px-3 py-1 rounded-full text-[11px] font-extrabold 
           tracking-[0.2em] uppercase bg-[#F3E7D8] text-[#8D6E63] border border-[#E1C9B8];
  }

  .submit-btn {
    @apply text-white font-bold tracking-widest rounded-2xl transition;
    background: linear-gradient(135deg,#A68A7C,#E6C88A);
    box-shadow: 0 14px 30px rgba(166,138,124,.25);
    border: 2px solid rgba(141,110,99,0.4);
  }
  .submit-btn:hover {
    @apply -translate-y-0.5;
    box-shadow: 0 18px 35px rgba(166,138,124,.3);
  }

  .field-error { @apply border-red-500 bg-red-50; }
  .field-error-message { @apply text-red-500 text-xs font-bold mt-1; }
  .sr-only { @apply absolute w-px h-px overflow-hidden whitespace-nowrap; clip: rect(0,0,0,0); }

  .field-error-btn { @apply border-red-500 bg-red-50; }
  .pill-error span { @apply border-red-500 text-red-500 bg-red-50; }
  .choice-error .choice-card__body { @apply border-red-500 bg-red-50; }
}

.float-layer { position:absolute; inset:0; overflow:hidden; pointer-events:none; z-index:0; }
.bubble {
  position:absolute; border-radius:9999px;
  background:radial-gradient(circle at 30% 30%, rgba(255,255,255,0.7), rgba(230,200,138,0.15));
  border:1px solid rgba(179,154,140,0.25);
  box-shadow:0 8px 20px rgba(166,138,124,0.08);
  animation: float 7s ease-in-out infinite;
}
.star {
  position:absolute;
  color:rgba(179,154,140,0.35);
  animation: float 6s ease-in-out infinite, twinkle 3.5s ease-in-out infinite;
}
@keyframes twinkle { 0%,100%{opacity:.4; transform:scale(.9);} 50%{opacity:1; transform:scale(1.1);} }

.view-section { display:none; opacity:0; transition:opacity .4s ease; }
.view-section.active { display:block; opacity:1; }

.custom-radio, .custom-checkbox {
  appearance:none; width:20px; height:20px; border-radius:9999px;
  border:2px solid #E3D0C2; background:#fff; display:grid; place-content:center;
  cursor:pointer; box-shadow: inset 0 0 0 2px rgba(255,255,255,0.7), 0 2px 6px rgba(166,138,124,0.18);
  transition:.2s;
}
.custom-checkbox{ border-radius:6px; }
.custom-radio::before {
  content:""; width:9px; height:9px; border-radius:9999px;
  background:linear-gradient(135deg,#A68A7C,#E6C88A); transform:scale(0); transition:.2s;
  box-shadow:0 2px 6px rgba(166,138,124,0.4);
}
.custom-radio:checked { border-color:#A68A7C; box-shadow:0 0 0 4px rgba(166,138,124,0.15), inset 0 0 0 2px #fff; }
.custom-radio:checked::before { transform:scale(1); }

.custom-checkbox::before {
  content:"âœ“"; font-size:12px; font-weight:900; color:white; transform:scale(0); transition:.2s;
}
.custom-checkbox:checked {
  background:linear-gradient(135deg,#A68A7C,#E6C88A); border-color:#A68A7C;
  box-shadow:0 0 0 4px rgba(166,138,124,0.15);
}
.custom-checkbox:checked::before { transform:scale(1); }

.lightbox { position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.65); z-index:9999; padding:20px; }
.lightbox.show { display:flex; }
.lightbox-content { background:#fff; border-radius:20px; padding:16px; max-width:90vw; max-height:90vh; box-shadow:0 20px 50px rgba(0,0,0,.35); position:relative; }
.lightbox-content img { max-width:100%; max-height:80vh; border-radius:12px; }
.lightbox-close { position:absolute; top:-12px; right:-12px; background:#fff; border:2px solid #D6C6BA; border-radius:9999px; width:36px; height:36px; display:flex; align-items:center; justify-content:center; cursor:pointer; box-shadow:0 4px 10px rgba(0,0,0,.15); }

.terms-modal{ position:fixed; inset:0; z-index:9998; background:rgba(0,0,0,.55); display:none; align-items:center; justify-content:center; padding:20px; }
.terms-modal.show{ display:flex; }
.terms-box{ background:#fff; border-radius:20px; max-width:600px; width:100%; max-height:85vh; display:flex; flex-direction:column; overflow:hidden; }
.terms-body{ padding:20px; overflow-y:auto; flex:1; background:#FBF9F6; }
.terms-footer{ padding:16px; border-top:2px dashed #EAE2D9; }
.terms-footer button:disabled{ background:#eee; color:#aaa; cursor:not-allowed; }

.sig-modal{ position:fixed; inset:0; z-index:9999; background:#FBF9F6; display:none; flex-direction:column; }
.sig-modal.show{ display:flex; }
.sig-header{ background:#A68A7C; color:white; padding:12px 16px; display:flex; justify-content:space-between; align-items:center; }
.sig-canvas-wrap{ flex:1; background:#FBF9F6; overflow:hidden; touch-action:none; }
.sig-canvas{ width:100%; height:100%; display:block; touch-action:none; }

.signature-locked{ opacity:.6; background:#fff5f5; border-color:#fca5a5 !important; }
.lock-shake{ animation:shake .4s; }
@keyframes shake{ 0%,100%{transform:translateX(0);} 20%,60%{transform:translateX(-4px);} 40%,80%{transform:translateX(4px);} }

@media (max-width:640px){
  body{ padding:12px; }
  main{ max-width:100%; }
  .card-panel{ border-radius:20px; }
  .form-input,input,select,textarea{ font-size:16px !important; }
  .pill-option span{ padding:10px 14px; font-size:14px; min-height:40px; }
  .choice-card__body{ padding:14px 16px; font-size:14px; line-height:1.5; }
  .custom-radio,.custom-checkbox{ width:22px; height:22px; }
  .grooming-page .grid.grid-cols-2{ grid-template-columns:1fr !important; }
  .history-btn{ padding:8px 12px; font-size:13px; }
  .submit-btn{ padding:16px 0; font-size:16px; border-radius:20px; }
  .card-panel .w-64.h-64{ width:200px !important; height:200px !important; }
  .card-panel:hover{ transform:none; box-shadow:var(--tw-shadow-cute); }
  .photo-choice{ grid-template-columns:1fr; }
}
/* === â¬‡ï¸ è£œå›åŸæœ¬å­—ç´š & å€å¡Šç´°ç¯€ === */

/* Hero æ¨™é¡Œ */
.grooming-page .hero-title{
  font-size:22px;
  font-weight:900;
  color:#7C604E;
}
.grooming-page .hero-sub{
  font-size:13px;
  color:#8A6F5B;
}

/* ä¹™æ–¹è³‡è¨Š */
.partner-info{
  padding:0;
  background:transparent;
  border:none;
  box-shadow:none;
}
.partner-info .info-title{
  font-weight:900;
  color:#8D6E63;
  font-size:14px;
  letter-spacing:.1em;
}
.partner-info .info-row{
  display:flex;
  align-items:center;
  gap:10px;
  font-size:13px;
  color:#7C604E;
}
.partner-info .info-row i{
  width:18px;
  height:18px;
  color:#A68A7C;
}

/* Grooming ä¸»å¡ç‰‡å¤–è§€ */
.grooming-page .card-panel{
  background:rgba(255,255,255,0.96);
  border:1.5px solid rgba(230,220,210,0.95);
  border-radius:28px;
  box-shadow:0 14px 35px rgba(166,138,124,0.12);
  overflow:hidden;
  position:relative;
}
.grooming-page .card-panel::before{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(180deg, rgba(255,255,255,0.35) 0%, rgba(255,255,255,0) 60%);
  z-index:0;
  pointer-events:none;
}
.grooming-page .card-panel > *{
  position:relative;
  z-index:1;
}
/* âœ… è£œå›åŸæœ¬ç—…å²å€å¡Šç´…è‰²æ¨£å¼ */
.history-box{
  background:#FFF7F7;
  border:1.5px solid #F3D6D6;
  border-radius:20px;
  padding:16px;
}
.history-pill span{
  border-color:#F2C6C6 !important;
  color:#C86969 !important;
  background:#fff !important;
}
.history-pill input:checked + span{
  background:#C86969 !important;
  border-color:#C86969 !important;
  color:#fff !important;
}

/* âœ… åƒ¹ç›®è¡¨åœ–ç‰‡åœ“è§’ */
.grooming-page .price-card img{
  border-radius:18px;
}

/* âœ… å…¶ä»–è£œå…… mini pill */
.extra-box .section-pill-mini{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:4px 10px;
  border-radius:999px;
  font-size:11px;
  font-weight:800;
  letter-spacing:.15em;
  text-transform:uppercase;
  background:#F5E9D0;
  color:#8D6E63;
  border:1px solid #E1C9B8;
}

/* âœ… æ„Ÿè¬å€å¡Šï¼ˆå¦‚æœä½ é‚„æœƒç”¨åˆ°ï¼‰ */
.thanks-box p{
  font-size:13px;
  color:#7C604E;
  line-height:1.6;
}
.thanks-box .ack-row{
  display:flex;
  align-items:center;
  gap:10px;
  margin-top:12px;
}
</style>
</head>

<body class="min-h-screen relative flex flex-col items-center p-4">
    <!-- âœ… NAV å°èˆªåˆ—ï¼ˆåªé¡¯ç¤ºåœ¨ç¾å®¹é ï¼‰ -->
    <nav id="main-nav" class="hidden w-full sticky top-3 z-30">
        <div class="w-full max-w-lg mx-auto px-3">
            <div class="bg-white/80 backdrop-blur-xl border border-[#EAE2D9]/70 shadow-[0_10px_30px_rgba(166,138,124,0.15)] rounded-[28px] px-4 py-3 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-theme-yellowLight/70 flex items-center justify-center shadow-sm">
                        <img src="logo.png" alt="Woofmen Logo" class="w-7 h-7 object-contain">
                    </div>
                    <div class="leading-tight">
                        <div class="text-sm font-black text-theme-brownDeep tracking-wider">Woofmen æ±ªå€‘</div>
                        <div class="text-[10px] text-theme-sub tracking-[0.25em]">GROOMING</div>
                    </div>
                </div>
                <button onclick="switchView('home')" class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-theme-brown text-white text-xs font-bold shadow-cute-sm hover:bg-theme-brownDeep hover:-translate-y-0.5 transition">
                    <i data-lucide="arrow-left" class="w-4 h-4"></i>
                    è¿”å›é¦–é 
                </button>
            </div>
        </div>
    </nav>
    <!-- âœ… æ¼‚æµ®å“ç‰Œå…ƒç´  -->
<div class="float-layer">
    <!-- bubbles -->
    <div class="bubble w-20 h-20 top-8 left-8" style="animation-delay:0s;"></div>
    <div class="bubble w-12 h-12 top-40 right-10" style="animation-delay:1s;"></div>
    <div class="bubble w-28 h-28 bottom-20 left-[-20px]" style="animation-delay:2s;"></div>
    <div class="bubble w-10 h-10 bottom-10 right-16" style="animation-delay:3s;"></div>

    <!-- stars -->
    <i data-lucide="star" class="star w-6 h-6 top-16 right-24" style="animation-delay:.5s;"></i>
    <i data-lucide="sparkles" class="star w-5 h-5 bottom-24 left-20" style="animation-delay:1.2s;"></i>
    <i data-lucide="sparkle" class="star w-4 h-4 top-56 left-12" style="animation-delay:1.8s;"></i>
</div>
    <main class="w-full max-w-lg mx-auto relative z-10 flex flex-col">
        <div id="view-home" class="view-section active w-full">
            <div class="flex flex-col justify-center min-h-[90vh] py-8">

            <!-- âœ… ä¸»è¦–è¦ºï¼šæœ€å…ˆè¼‰å…¥ -->
            <div class="w-full card-panel rounded-[32px] p-8 sm:p-10 text-center relative overflow-hidden animate-slide-up z-20 mb-8 group">
                <div class="absolute -top-24 -right-24 w-64 h-64 bg-theme-brown/5 rounded-full blur-3xl"></div>
                <div class="absolute -bottom-24 -left-24 w-64 h-64 bg-theme-yellow/5 rounded-full blur-3xl"></div>

                <div class="relative z-10 mb-6 flex justify-center">
                    <div class="w-64 h-64 animate-float">
                         <img src="logo.png" alt="Woofmen æ±ªå€‘ Logo" class="w-full h-full object-contain transform transition duration-700 group-hover:scale-110 group-hover:rotate-[-2deg]">
                    </div>
                </div>

                <div class="relative z-10 space-y-4 mb-10">
                    <p class="text-sm text-theme-sub tracking-[0.2em] font-medium pt-1">
                        <span>ğŸ›ä¸­å£¢é’åŸ”æ¯›å­©å€‘å°ˆå±¬çš„æ²™é¾æ‰€</span>
                    </p>
                </div>
                
                <div class="relative z-10">
                    <button onclick="switchView('grooming')" class="group relative w-full rounded-2xl bg-theme-brown text-white font-bold text-lg tracking-[0.2em] py-4 px-6
                                   shadow-cute-sm border-2 border-theme-brownDeep/50 hover:bg-theme-brownDeep
                                   transition-all duration-300 hover:-translate-y-1 hover:shadow-cute-sm-hover active:translate-y-0 active:shadow-cute-sm">
                        <div class="flex items-center justify-center gap-3">
                            <i data-lucide="sparkles" class="w-5 h-5 text-white/80 group-hover:text-yellow-300 group-hover:scale-110 transition-all duration-300"></i>
                            <span>å¯µç‰©ç¾å®¹å¥‘ç´„</span>
                            <i data-lucide="chevron-right" class="w-4 h-4 text-white/60 group-hover:translate-x-1 transition-transform"></i>
                        </div>
                    </button>
                    <p class="text-xs text-theme-sub mt-4 tracking-wider opacity-80 flex items-center justify-center gap-1.5">
                        <i data-lucide="info" class="w-3.5 h-3.5"></i> é»æ“Šäº†è§£æˆ‘å€‘çš„æœå‹™é …ç›®èˆ‡æµç¨‹
                    </p>
                </div>
            </div>

            <!-- âœ… ä¾åºè¼‰å…¥ï¼šLINE â†’ IG â†’ åœ°åœ– -->
            <div class="w-full space-y-3">
                <a href="https://lin.ee/MqLdJEe" target="_blank" class="btn-card flex items-center p-4 rounded-2xl group hover:border-[#06C755]/50">
                    <div class="w-10 h-10 rounded-full bg-[#06C755]/10 text-[#06C755] flex items-center justify-center mr-4 group-hover:bg-[#06C755] group-hover:text-white transition-colors duration-300">
                        <svg viewBox="0 0 256 256" class="w-5 h-5" fill="currentColor"><g transform="translate(1.4 1.4) scale(2.81)"><path d="M 42.685 88.018 c -0.944 0 -1.935 -0.233 -2.809 -0.929 c -2.075 -1.653 -1.61 -4.302 -1.435 -5.299 l 0.015 -0.085 c 0.097 -0.573 0.523 -3.138 0.589 -3.532 c 0.143 -1.106 0.122 -1.725 0.087 -2.032 c -0.248 -0.131 -0.736 -0.332 -1.527 -0.51 C 15.806 72.699 0 57.334 0 39.057 C 0 18.615 20.187 1.984 45 1.984 c 24.813 0 45 16.631 45 37.073 c 0 6.388 -1.921 12.34 -5.848 18.055 h 0.347 l -2.727 3.14 c -0.471 0.568 -0.964 1.135 -1.476 1.7 l -0.03 0.034 c -9.005 10.364 -29.164 23.109 -34.124 25.199 C 45.535 87.442 44.169 88.018 42.685 88.018 z M 45 7.872 c -21.566 0 -39.112 13.99 -39.112 31.185 c 0 15.321 13.716 28.255 32.614 30.754 l 0.234 0.04 c 3.099 0.668 5.056 1.964 5.817 3.853 c 0.524 1.311 0.625 2.988 0.324 5.285 l -0.015 0.099 c 0 0 -0.221 1.327 -0.399 2.397 c 5.106 -2.446 21.464 -12.945 29.972 -21.843 l 1.432 -1.571 c 5.626 -6.17 8.246 -12.212 8.246 -19.015 C 84.112 21.862 66.566 7.872 45 7.872 z"/><path d="M 37.309 31.467 h -2.655 c -0.407 0 -0.737 0.33 -0.737 0.736 v 16.492 c 0 0.406 0.33 0.735 0.737 0.735 h 2.655 c 0.407 0 0.737 -0.329 0.737 -0.735 V 32.203 C 38.047 31.797 37.716 31.467 37.309 31.467"/><path d="M 55.584 31.467 h -2.655 c -0.407 0 -0.737 0.33 -0.737 0.736 v 9.798 l -7.558 -10.207 c -0.017 -0.026 -0.037 -0.051 -0.057 -0.075 h -2.655 c -0.407 0 -0.737 0.33 -0.737 0.736 v 16.492 c 0 0.406 0.33 0.735 0.737 0.735 h 2.655 v -10.59 l 7.567 10.22 c 0.052 0.073 0.117 0.134 0.187 0.182 h 2.655 c 0.407 0 0.737 -0.329 0.737 -0.735 V 32.203 C 56.321 31.797 55.991 31.467 55.584 31.467"/><path d="M 30.91 45.302 h -7.214 V 32.204 c 0 -0.407 -0.33 -0.737 -0.737 -0.737 h -2.655 c -0.407 0 -0.737 0.33 -0.737 0.737 v 16.491 c 0 0.407 0.33 0.737 0.737 0.737 H 30.91 c 0.407 0 0.736 -0.33 0.736 -0.737 v -2.655 C 31.646 45.632 31.316 45.302 30.91 45.302"/><path d="M 70.245 35.597 c 0.407 0 0.736 -0.33 0.736 -0.737 v -2.655 c 0 -0.407 -0.329 -0.738 -0.736 -0.738 H 59.639 v 16.489 c 0 0.407 0.33 0.737 0.737 0.737 h 10.606 c 0.407 0 0.736 -0.33 0.736 -0.737 v -2.655 c 0 -0.407 -0.329 -0.737 -0.736 -0.737 h -7.213 v -2.788 h 7.213 c 0.407 0 0.736 -0.33 0.736 -0.737 v -2.655 c 0 -0.407 -0.329 -0.738 -0.736 -0.738 h -7.213 v -2.787 H 70.245 z"/></g></svg>                    
                    </div>
                    <div class="flex-1">
                         <span class="block text-xs font-bold text-theme-sub tracking-widest uppercase mb-0.5">Online Booking</span>
                         <span class="block text-sm font-bold text-theme-text group-hover:text-[#06C755] transition-colors">åŠ å…¥ LINE å®˜æ–¹å¸³è™Ÿ</span>
                    </div>
                    <i data-lucide="chevron-right" class="w-4 h-4 text-gray-300 group-hover:text-[#06C755]"></i>
                </a>

                <a href="https://www.instagram.com/woofmen.petsalon?igsh=MXcydGNnbGxqaDh5bg%3D%3D&utm_source=qr" target="_blank" class="btn-card flex items-center p-4 rounded-2xl group reveal-item" style="animation-delay:0.6s;">
                    <div class="w-10 h-10 rounded-full bg-pink-100 text-pink-500 flex items-center justify-center mr-4 group-hover:bg-pink-500 group-hover:text-white transition-colors duration-300">
                        <i data-lucide="instagram" class="w-5 h-5"></i>
                    </div>
                    <div class="flex-1">
                        <span class="block text-xs font-bold text-theme-sub tracking-widest uppercase mb-0.5">Social Media</span>
                        <span class="block text-sm font-bold text-theme-text group-hover:text-pink-500 transition-colors">è¿½è¹¤ Instagram å®˜æ–¹å¸³è™Ÿ</span>
                    </div>
<i data-lucide="chevron-right" class="w-4 h-4 text-gray-300 group-hover:text-pink-500"></i>
                </a>

                <a href="https://maps.google.com/?q=æ¡ƒåœ’å¸‚ä¸­å£¢å€é«˜éµç«™å‰è¥¿è·¯äºŒæ®µ208è™Ÿ1æ¨“" target="_blank" class="btn-card flex items-center p-4 rounded-2xl group reveal-item" style="animation-delay:0.8s;">
                    <div class="w-10 h-10 rounded-full bg-gray-100 text-gray-500 flex items-center justify-center mr-4 group-hover:bg-theme-yellow group-hover:text-white transition-colors">
                        <i data-lucide="map-pin" class="w-5 h-5"></i>
                    </div>
                    <div class="flex-1">
                        <span class="block text-xs font-bold text-theme-sub tracking-widest uppercase mb-0.5">Location</span>
                        <span class="block text-sm font-bold text-theme-text group-hover:text-theme-yellow transition-colors">æ¡ƒåœ’å¸‚ä¸­å£¢å€é«˜éµç«™å‰è¥¿è·¯äºŒæ®µ208è™Ÿ1æ¨“</span>
                    </div>
                    <i data-lucide="chevron-right" class="w-4 h-4 text-gray-300 group-hover:text-theme-yellow"></i>
                </a>
            </div>
        </div>
    </div> <!-- âœ… view-home å®Œæ•´çµæŸ -->

<div id="view-grooming" class="view-section w-full grooming-page pt-4 pb-16">
            
    <!-- ğŸ”¸ ä¸»æ¨™é¡Œå¡-->
    <div class="card-panel p-7 rounded-3xl mb-6 text-center relative overflow-hidden">
        <span class="section-pill">GROOMING FORM</span>
        <h2 class="hero-title">å¯µç‰©ç¾å®¹é ç´„è¡¨å–®</h2>
        <p class="hero-sub">âœ¿ å¡«å®Œå¾Œè«‹ LINE å‘ŠçŸ¥æ¯›å­©åå­—èˆ‡æ¬²é ç´„æ™‚é–“ âœ¿</p>
    </div>

    <!-- ğŸ”¸ åƒ¹ç›®è¡¨ï¼ˆå‡ç´šç‰ˆï¼‰ -->
    <div class="card-panel p-5 mb-6 rounded-3xl price-card">
        <div class="flex items-center justify-between mb-4">
            <div class="flex items-center gap-2 text-theme-brownDeep font-bold">
                <i data-lucide="receipt" class="w-5 h-5"></i>
                <span>æœå‹™åƒ¹ç›®è¡¨</span>
            </div>
            <span class="section-pill">é»æ“Šæ”¾å¤§</span>
        </div>
        <div class="rounded-2xl overflow-hidden border border-theme-yellowLight/80 bg-white/70 shadow-sm cursor-zoom-in">
            <img src="menu.jpg" alt="åƒ¹ç›®è¡¨" class="w-full h-auto"
                 onclick="openLightbox('menu.jpg')">
        </div>
        <p class="text-xs text-theme-sub mt-3 text-center">é»æ“Šåœ–ç‰‡å¯æ”¾å¤§æŸ¥çœ‹</p>
    </div>

<form id="grooming-form" class="space-y-6" novalidate>

<!-- âœ… é£¼ä¸»è³‡æ–™ -->
<div class="card-panel p-6 rounded-2xl space-y-6">

    <!-- æ¨™é¡Œ -->
    <div class="flex items-center gap-3 border-b-2 border-dashed border-[#EAE2D9] pb-3">
        <div class="w-9 h-9 rounded-full bg-theme-yellow/30 flex items-center justify-center text-theme-brownDeep">
            <i data-lucide="user" class="w-5 h-5"></i>
        </div>
        <h3 class="font-bold text-theme-brownDeep text-base">é£¼ä¸»åŸºæœ¬è³‡æ–™</h3>
    </div>

    <!-- æ¬„ä½ -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <!-- Email -->
        <div>
            <label class="block text-sm font-bold mb-1 ml-1">é›»å­éƒµä»¶ (é¸å¡«)</label>
            <input type="email" class="form-input" placeholder="å¯„é€å¥‘ç´„å‰¯æœ¬ç”¨">
        </div>

        <!-- å§“å -->
        <div>
            <label class="block text-sm font-bold mb-1 ml-1">ä¸»äººå§“å <span class="text-red-400">*</span></label>
            <input type="text" class="form-input" placeholder="è«‹è¼¸å…¥å…¨å" required>
        </div>

        <!-- é›»è©± + èˆŠå®¢æŒ‰éˆ• -->
        <div class="sm:col-span-2">
            <label class="block text-sm font-bold mb-1 ml-1">é€£çµ¡é›»è©± <span class="text-red-400">*</span></label>
            <div class="flex gap-3">
                <input type="tel" class="form-input flex-1" placeholder="0912345678" required
       inputmode="numeric" pattern="^09\\d{8}$" maxlength="10">
                <button type="button"
                        class="px-4 py-2 rounded-xl bg-theme-brown text-white font-bold text-sm shadow-cute-sm hover:bg-theme-brownDeep transition-all">
                    èˆŠå®¢
                </button>
            </div>
        </div>

        <!-- èº«åˆ†è­‰ -->
        <div>
            <label class="block text-sm font-bold mb-1 ml-1">èº«åˆ†è­‰å­—è™Ÿ <span class="text-red-400">*</span></label>
            <input type="text" class="form-input" placeholder="ä¾‹å¦‚: A123456789" required>
        </div>
    </div>

    <!-- åœ°å€ -->
    <div>
        <label class="block text-sm font-bold mb-1 ml-1">é€šè¨Šåœ°å€ <span class="text-red-400">*</span></label>
        <input type="text" class="form-input" placeholder="è«‹è¼¸å…¥å®Œæ•´åœ°å€" required>
    </div>

    <div class="border-t border-dashed border-[#EAE2D9] pt-4 grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div>
            <label class="block text-sm font-bold mb-1 ml-1 text-red-400">ç·Šæ€¥è¯çµ¡äººå§“å <span class="text-red-400">*</span></label>
            <input type="text" class="form-input border-red-200 bg-red-50/40" required
       inputmode="numeric" pattern="^09\\d{8}$" maxlength="10">
        </div>
        <div>
            <label class="block text-sm font-bold mb-1 ml-1 text-red-400">ç·Šæ€¥é€£çµ¡é›»è©± <span class="text-red-400">*</span></label>
            <input type="tel" class="form-input border-red-200 bg-red-50/40" required>
        </div>
    </div>
</div>

<!-- âœ… å¯µç‰©è©³ç´°è³‡æ–™ -->
<div class="card-panel p-6 rounded-2xl space-y-6">

    <!-- æ¨™é¡Œ -->
    <div class="flex items-center gap-3 border-b-2 border-dashed border-[#EAE2D9] pb-3">
        <div class="w-9 h-9 rounded-full bg-theme-yellow/30 flex items-center justify-center text-theme-brownDeep">ğŸ¾</div>
        <h3 class="font-bold text-theme-brownDeep text-base">å¯µç‰©è©³ç´°è³‡æ–™</h3>
    </div>

    <!-- åŸºæœ¬ -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div>
            <label class="block text-sm font-bold mb-1 ml-1">å¯µç‰©åå­— <span class="text-red-400">*</span></label>
            <input type="text" class="form-input" required>
        </div>
        <div>
            <label class="block text-sm font-bold mb-1 ml-1">å“ç¨® <span class="text-red-400">*</span></label>
            <input type="text" class="form-input" required>
        </div>
        <div>
            <label class="block text-sm font-bold mb-1 ml-1">é«”é‡ (kg) <span class="text-red-400">*</span></label>
            <input type="number" class="form-input" required>
        </div>

        <!-- å¹´é½¡ -->
        <div>
            <label class="block text-sm font-bold mb-2 ml-1">å¹´é½¡ <span class="text-red-400">*</span></label>
            <div class="flex gap-2 mb-2">
                <button type="button" class="age-btn active px-3 py-2 rounded-xl border bg-theme-brown text-white text-xs font-bold" data-age="over">ä¸€æ­²ä»¥ä¸Š</button>
                <button type="button" class="age-btn px-3 py-2 rounded-xl border bg-white text-theme-sub text-xs font-bold" data-age="under">ä¸€æ­²ä»¥ä¸‹</button>
            </div>
            <div id="age-over">
                <div class="relative">
                    <input type="number" id="age-year" class="form-input pr-10" placeholder="è«‹è¼¸å…¥æ•¸å­—">
                    <span class="absolute right-3 top-1/2 -translate-y-1/2 text-theme-sub text-sm font-bold">æ­²</span>
                </div>
            </div>
            <div id="age-under" class="hidden">
                <select id="age-month" class="form-input">
                    <option value="">è«‹é¸æ“‡æœˆé½¡</option>
                    <option value="1">1 å€‹æœˆ</option><option value="2">2 å€‹æœˆ</option>
                    <option value="3">3 å€‹æœˆ</option><option value="4">4 å€‹æœˆ</option>
                    <option value="5">5 å€‹æœˆ</option><option value="6">6 å€‹æœˆ</option>
                    <option value="7">7 å€‹æœˆ</option><option value="8">8 å€‹æœˆ</option>
                    <option value="9">9 å€‹æœˆ</option><option value="10">10 å€‹æœˆ</option>
                    <option value="11">11 å€‹æœˆ</option>
                </select>
            </div>
        </div>
    </div>

    <!-- æ€§åˆ¥/çµç´® -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div>
            <label class="block text-sm font-bold mb-2 ml-1">æ€§åˆ¥ <span class="text-red-400">*</span></label>
<div class="flex gap-3 flex-wrap">
    <label class="pill-option">
        <input type="radio" name="sex" required>
        <span>å…¬</span>
    </label>
    <label class="pill-option">
        <input type="radio" name="sex">
        <span>æ¯</span>
    </label>
</div>
        </div>
        <div>
            <label class="block text-sm font-bold mb-2 ml-1">çµç´® <span class="text-red-400">*</span></label>
<div class="flex gap-3 flex-wrap">
    <label class="pill-option">
        <input type="radio" name="fix" required>
        <span>æ˜¯</span>
    </label>
    <label class="pill-option">
        <input type="radio" name="fix">
        <span>å¦</span>
    </label>
</div>
        </div>
    </div>


<!-- æ™¶ç‰‡ -->
<div>
    <label class="block text-sm font-bold mb-2 ml-1">æ™¶ç‰‡ç‹€æ…‹ <span class="text-red-400">*</span></label>
<div class="flex gap-3 flex-wrap">
    <label class="pill-option">
        <input type="radio" name="chip" value="has" required>
        <span>æœ‰æ™¶ç‰‡</span>
    </label>
    <label class="pill-option">
        <input type="radio" name="chip" value="unknown">
        <span>æœ‰æ™¶ç‰‡(è™Ÿç¢¼ä¸è©³)</span>
    </label>
    <label class="pill-option">
        <input type="radio" name="chip" value="none">
        <span>ç„¡æ™¶ç‰‡</span>
    </label>
</div>

    <!-- âœ… æœ‰æ™¶ç‰‡æ™‚æ‰é¡¯ç¤º -->
    <input id="chip-number-input" type="text" class="form-input mt-3 hidden"
           placeholder="è«‹è¼¸å…¥å®Œæ•´æ™¶ç‰‡è™Ÿç¢¼">
</div>

    <!-- æŒ‡å®šé†«é™¢ -->
    <div>
        <label class="block text-sm font-bold mb-1 ml-1">æŒ‡å®šå°±é†«è¨ºç™‚æ©Ÿæ§‹ (è‹¥æœªå¡«å¯«ï¼Œå‰‡é€å¾€ç‰¹ç´„é†«é™¢)</label>
        <input type="text" class="form-input" placeholder="è‹¥æœªå¡«å¯«å‰‡ç”±åº—å®¶æŒ‡å®š">
<div class="mt-4 rounded-2xl border border-theme-yellowLight/80 bg-white/80 px-4 py-3 shadow-sm">
    <div class="flex items-center gap-2 text-[11px] font-bold text-theme-brownDeep tracking-widest uppercase">
        <i data-lucide="stethoscope" class="w-4 h-4 text-theme-brown"></i>
        ä¹™æ–¹æŒ‡å®šé†«é™¢
    </div>

    <div class="mt-2 font-bold text-theme-text text-sm">ç™½æ¯›å‹•ç‰©é†«é™¢</div>

    <div class="mt-1 text-xs text-theme-sub flex items-start gap-2">
        <i data-lucide="map-pin" class="w-3.5 h-3.5 mt-0.5 text-theme-brown/60"></i>
        320æ¡ƒåœ’å¸‚ä¸­å£¢å€é’å•†è·¯143è™Ÿ
    </div>

    <div class="mt-1 text-xs text-theme-sub flex items-center gap-2">
        <i data-lucide="phone" class="w-3.5 h-3.5 text-theme-brown/60"></i>
        03 287 6687
    </div>
</div>
    </div>

<!-- âœ… éå¾€ç—…å² -->
<div class="history-box space-y-3">
    <div class="flex items-center justify-between">
        <div class="flex items-center gap-2 font-bold text-[#C86969]">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            éå¾€ç—…å² <span class="text-red-400">*</span>
        </div>
        <span class="text-[10px] font-bold text-[#CFA2A2] bg-white/70 border border-[#F3D6D6] px-2 py-1 rounded-full">
            è«‹å‹™å¿…å¦‚å¯¦å‘ŠçŸ¥
        </span>
    </div>

    <div class="flex gap-3">
        <label class="pill-option pill-option--big history-pill">
            <input type="radio" name="history" value="yes" required>
            <span>æœ‰</span>
        </label>
        <label class="pill-option pill-option--big history-pill">
            <input type="radio" name="history" value="no">
            <span>ç„¡</span>
        </label>
    </div>

    <!-- ç—…å²æ¸…å–® -->
    <div id="history-list" class="hidden flex flex-wrap gap-2">
        <button type="button" class="history-btn">å¿ƒè‡Ÿç—…</button>
        <button type="button" class="history-btn">æ°£å–˜</button>
        <button type="button" class="history-btn">æ°£ç®¡å¡Œé™·</button>
        <button type="button" class="history-btn">ç™½å…§éšœ</button>
        <button type="button" class="history-btn">ç™²ç™‡</button>
        <button type="button" class="history-btn">å¿ƒçµ²èŸ²</button>
        <button type="button" class="history-btn">è‰¾åˆ©å¸Œé«”</button>
        <button type="button" class="history-btn">è…¹è†œç‚</button>
        <button type="button" class="history-btn">è…¹ç©æ°´</button>
        <button type="button" class="history-btn">æ‰‹è¡“å¤–å‚·æœªç™’åˆ</button>
        <button type="button" class="history-btn">é«–é—œç¯€å•é¡Œ</button>
        <button type="button" class="history-btn">éª¨æŠ˜</button>
        <button type="button" class="history-btn">è…¸ç‚</button>
        <button type="button" class="history-btn">è¡€ä¾¿</button>
        <button type="button" class="history-btn">è¡€å°¿</button>
        <button type="button" class="history-btn">æ‡·å­•</button>
        <button type="button" class="history-btn">å‚³æŸ“æ€§ç–¾ç—…</button>
        <button type="button" class="history-btn" data-other="true">+ å…¶ä»–</button>
    </div>

    <input id="history-other-input" type="text" class="form-input mt-3 hidden" placeholder="è«‹å¡«å¯«å…¶ä»–ç—…å²...">
</div>
</div>

<!-- âœ… æ¯›å­©å€‹æ€§ / æ”»æ“Šæ€§ / ç¾å®¹æ€§æƒ…æ•´åˆ -->
<div class="card-panel p-6 rounded-2xl space-y-8">
    <h3 class="font-bold text-theme-brownDeep border-b-2 border-dashed border-[#EAE2D9] pb-2">
        æ¯›å­©å€‹æ€§èˆ‡æ”»æ“Šæ€§è©•ä¼° *
    </h3>

    <!-- åˆ†çµ„ï¼šåŸºæœ¬æ€§æ ¼ -->
    <div class="space-y-4">
        <span class="inline-block text-xs font-bold text-theme-sub bg-theme-yellowLight/60 px-3 py-1 rounded-full">åŸºæœ¬æ€§æ ¼</span>

        <!-- è¦ªäºº / ä¸è¦ªäºº -->
        <div>
<div class="flex gap-3 flex-wrap">
    <label class="pill-option">
        <input type="radio" name="friendly_people" required>
        <span>è¦ªäºº</span>
    </label>
    <label class="pill-option">
        <input type="radio" name="friendly_people">
        <span>ä¸è¦ªäºº</span>
    </label>
</div>
        </div>

<div id="dog-social">
<div class="flex gap-3 flex-wrap">
    <label class="pill-option">
        <input type="radio" name="friendly_dog" required>
        <span>è¦ªç‹—</span>
    </label>
    <label class="pill-option">
        <input type="radio" name="friendly_dog">
        <span>ä¸è¦ªç‹—</span>
    </label>
</div>
</div>
    </div>

    <!-- åˆ†çµ„ï¼šæ”»æ“Šæ€§ -->
    <div class="space-y-4">
        <span class="inline-block text-xs font-bold text-theme-sub bg-theme-yellowLight/60 px-3 py-1 rounded-full">æ”»æ“Šæ€§è©•ä¼°</span>
        <div>
<div class="flex gap-3 flex-wrap">
    <label class="pill-option">
        <input type="radio" name="aggression" required>
        <span>æœ‰æ”»æ“Šæ€§</span>
    </label>
    <label class="pill-option">
        <input type="radio" name="aggression">
        <span>ç„¡æ”»æ“Šæ€§</span>
    </label>
</div>
        </div>
    </div>

    <!-- åˆ†çµ„ï¼šå…¶ä»–æ€§æ ¼ -->
    <div class="space-y-4">
        <span class="inline-block text-xs font-bold text-theme-sub bg-theme-yellowLight/60 px-3 py-1 rounded-full">å…¶ä»–å€‹æ€§ï¼ˆå¯è¤‡é¸ï¼‰</span>
<div class="pill-group">
    <label class="pill-option">
        <input type="checkbox">
        <span>æ˜“ç·Šå¼µ</span>
    </label>
    <label class="pill-option">
        <input type="checkbox">
        <span>æ˜“æ¿€å‹•</span>
    </label>
    <label class="pill-option">
        <input type="checkbox">
        <span>æ˜“å å«</span>
    </label>
</div>

        <div>
            <label class="block text-sm font-bold mb-1 ml-1">å…¶ä»–ï¼š</label>
            <input type="text" class="form-input" placeholder="å…¶ä»–å€‹æ€§è«‹å¡«å¯«...">
        </div>
    </div>

    <!-- ç¾å®¹æ€§æƒ… -->
    <div>
        <label class="block text-sm font-bold mb-2 ml-1">ç¾å®¹æ€§æƒ…èˆ‡æ”»æ“Šæ€§è©•ä¼° *</label>
<div class="space-y-2">
    <label class="choice-card">
        <input type="radio" name="temperament" required>
        <span class="choice-card__body">ğŸ˜‡ å¤©ä½¿å¯¶å¯¶ï¼šå€‹æ€§æº«å’Œï¼Œç„¡ä»»ä½•æ”»æ“Šç´€éŒ„ï¼Œä¹Ÿä¸æ€•ç”Ÿã€‚</span>
    </label>

    <label class="choice-card">
        <input type="radio" name="temperament">
        <span class="choice-card__body">ğŸ˜“ æœ‰é»ç·Šå¼µï¼šè†½å°æ€•ç”Ÿï¼Œå¯èƒ½æœƒä½å¼æˆ–é–ƒèº²ï¼Œä½†æœªæ›¾å’¬äººã€‚</span>
    </label>

    <label class="choice-card">
        <input type="radio" name="temperament">
        <span class="choice-card__body"><span class="warn">ğŸ¤¬ æ•æ„Ÿå¯¶å¯¶ï¼šç‰¹å®šéƒ¨ä½æ•æ„Ÿæˆ–æ›¾æœ‰æ”»æ“Šç´€éŒ„ (è«‹å‹™å¿…å‘ŠçŸ¥)ã€‚</span></span>
    </label>
</div>
    </div>
</div>
                <!-- âœ… çš®è†šç‹€æ³ -->
                <div class="card-panel p-6 rounded-2xl space-y-4">
                    <h3 class="font-bold text-theme-brownDeep border-b-2 border-dashed border-[#EAE2D9] pb-2">çš®è†šç‹€æ³ *</h3>
<div class="space-y-2">
    <label class="flex items-center gap-2"><input type="radio" name="skin" class="custom-radio" value="none" required>å®Œå…¨ä¸æœƒæŠ“ç™¢</label>
    <label class="flex items-center gap-2"><input type="radio" name="skin" class="custom-radio" value="sometimes">å¶çˆ¾æŠ“ç™¢</label>
    <label class="flex items-center gap-2"><input type="radio" name="skin" class="custom-radio" value="often">æŠ“ç™¢é »ç‡é«˜</label>
    <label class="flex items-center gap-2"><input type="radio" name="skin" class="custom-radio" value="other" id="skin-other-radio">å…¶ä»–</label>
</div>

<!-- âœ… å…¶ä»–è¼¸å…¥æ¡† -->
<input id="skin-other-input" type="text" class="form-input mt-3 hidden" placeholder="è«‹æè¿°çš®è†šç‹€æ³...">
                </div>

                <!-- âœ… æ³¨æ„äº‹é … -->
                <div class="card-panel p-6 rounded-2xl space-y-4">
                    <h3 class="font-bold text-theme-brownDeep border-b-2 border-dashed border-[#EAE2D9] pb-2">éœ€è¦æ³¨æ„çš„åœ°æ–¹</h3>
                    <div class="grid grid-cols-2 gap-2">
                        <label class="flex items-center gap-2"><input type="checkbox" class="custom-checkbox">æ€•æ°´</label>
                        <label class="flex items-center gap-2"><input type="checkbox" class="custom-checkbox">æ€•å¹é¢¨</label>
                        <label class="flex items-center gap-2"><input type="checkbox" class="custom-checkbox">ä¸å–œæ­¡æ“ è‚›é–€è…º</label>
                        <label class="flex items-center gap-2"><input type="checkbox" class="custom-checkbox">ä¸å–œæ­¡å‰ªæŒ‡ç”²</label>
                        <label class="flex items-center gap-2"><input type="checkbox" class="custom-checkbox">ä¸å–œæ­¡æ¢³æ¯›</label>
                        <label class="flex items-center gap-2"><input type="checkbox" class="custom-checkbox">æ”»æ“Šå’¬äºº</label>
<label class="flex items-center gap-2">
  <input type="checkbox" class="custom-checkbox" id="attention-other-check">
  å…¶ä»–
</label>
<input id="attention-other-input" type="text" class="form-input hidden" placeholder="è«‹å¡«å¯«å…¶ä»–æ³¨æ„äº‹é …...">
                    </div>
                </div>

                <!-- âœ… æ´—æ¾¡é »ç‡ -->
                <div class="card-panel p-6 rounded-2xl space-y-4">
                    <h3 class="font-bold text-theme-brownDeep border-b-2 border-dashed border-[#EAE2D9] pb-2">æ¯›å­©æ´—æ¾¡é »ç‡ *</h3>
                    <div class="space-y-2">
                        <label class="flex items-center gap-2"><input type="radio" name="bath" class="custom-radio" required>å›ºå®šæ¯é€± / ç¾å®¹é™¢æ´—</label>
                        <label class="flex items-center gap-2"><input type="radio" name="bath" class="custom-radio">å›ºå®šæ¯é€± / åœ¨å®¶æ´—</label>
                        <label class="flex items-center gap-2"><input type="radio" name="bath" class="custom-radio">å›ºå®šæ¯æœˆ / ç¾å®¹é™¢æ´—</label>
                        <label class="flex items-center gap-2"><input type="radio" name="bath" class="custom-radio">ä¸å›ºå®š</label>
<label class="flex items-center gap-2">
  <input type="radio" name="bath" class="custom-radio" value="other" id="bath-other-radio">
  å…¶ä»–
</label><input id="bath-other-input" type="text" class="form-input hidden" placeholder="è«‹æè¿°æ´—æ¾¡é »ç‡...">
                    </div>
                </div>

<!-- âœ… å…¶ä»–è£œå…… -->
<div class="card-panel p-6 rounded-2xl space-y-4 extra-box">

    <div>
        <label class="block text-sm font-bold mb-1 ml-1">æœ€è¿‘å»éçš„å¯µç‰©ç¾å®¹åº—å®¶?</label>
        <input type="text" class="form-input" placeholder="ä¾‹å¦‚ï¼šXXå¯µç‰©æ²™é¾">
    </div>

    <div>
        <label class="block text-sm font-bold mb-1 ml-1">æ€éº¼çŸ¥é“æ±ªå€‘çš„ â˜º</label>
        <input type="text" class="form-input" placeholder="ä¾‹å¦‚ï¼šæœ‹å‹æ¨è–¦ / IG / Google">
    </div>

<div>
    <label class="block text-sm font-bold mb-2 ml-1">é¡˜æ„è®“æ±ªå€‘ç™¼ä½ˆæ¯›å­©ç…§ç‰‡è‡³ç¤¾ç¾¤å—? *</label>
    <div class="photo-choice">
        <label class="photo-card">
            <input type="radio" name="photo" required>
            <div class="photo-card__body">
                <i data-lucide="camera" class="w-4 h-4"></i>
                <span>æˆ‘é¡˜æ„!!</span>
                <span class="badge">YES</span>
            </div>
        </label>
        <label class="photo-card">
            <input type="radio" name="photo">
            <div class="photo-card__body">
                <i data-lucide="shield-x" class="w-4 h-4"></i>
                <span>å…ˆä¸è¦ ><</span>
                <span class="badge">NO</span>
            </div>
        </label>
    </div>
</div>
</div>

<!-- âœ… æœ€å¾Œç¢ºèªï¼ˆæ–°æé†’å¡ï¼‰ -->
<div class="card-panel p-6 rounded-2xl notice-card">
    <div class="notice-header">
        <div class="notice-icon">
            <i data-lucide="heart"></i>
        </div>
        <div>
            <div class="notice-title">éå¸¸æ„Ÿè¬å¡«å¯«â¤</div>
            <div class="notice-sub">
                å¡«å®Œå¾Œè¦è¨˜å¾—åˆ°å®˜æ–¹ LINE å‘ŠçŸ¥æ¯›å­©åå­—åŠæ¬²é ç´„æ™‚æ®µå”·ï¼
            </div>
        </div>
    </div>

    <label class="notice-ack cursor-pointer">
        <input type="checkbox" required class="custom-checkbox" name="pet_ack" id="pet_ack">
        <span class="text-sm font-bold text-theme-brownDeep">æœ¬äººå·²äº†è§£ä¸¦ç¢ºå¯¦å‘ŠçŸ¥å¯µç‰©ç‹€æ³</span>
    </label>
</div>
                <!-- âœ… ä¹™æ–¹è³‡è¨Š -->
<div class="card-panel p-6 rounded-2xl space-y-3">
    <div class="partner-info space-y-3">
        <div class="info-title flex items-center gap-2">
            <i data-lucide="badge-check" class="w-4 h-4 text-theme-brown"></i>
            ä¹™æ–¹è³‡è¨Š
        </div>

        <div class="info-row">
            <i data-lucide="user"></i>
            <span><b>è² è²¬äººï¼š</b>æ—æŸä¼¶</span>
        </div>
        <div class="info-row">
            <i data-lucide="phone"></i>
            <span><b>è¯çµ¡é›»è©±ï¼š</b>0916â€‘884â€‘715</span>
        </div>
        <div class="info-row">
            <i data-lucide="map-pin"></i>
            <span><b>åœ°å€ï¼š</b>æ¡ƒåœ’å¸‚ä¸­å£¢å€é«˜éµç«™å‰è¥¿è·¯äºŒæ®µ208è™Ÿ1æ¨“</span>
        </div>
        <div class="info-row">
            <i data-lucide="clock"></i>
            <span><b>ç‡Ÿæ¥­æ™‚é–“ï¼š</b>11:00â€‘19:00</span>
        </div>
    </div>
</div>

<!-- âœ… æ¢æ¬¾èˆ‡ç°½å -->
<div class="card-panel p-6 rounded-2xl space-y-4" id="legal">
    <h3 class="font-bold text-theme-brownDeep border-b-2 border-dashed border-[#EAE2D9] pb-2">
        ç¾å®¹æ¢æ¬¾èˆ‡ç°½å *
    </h3>

    <!-- æ¢æ¬¾ -->
    <button type="button" id="open-terms-btn"
        class="w-full flex items-center justify-between p-4 rounded-xl border-2 border-theme-brown/30 hover:border-theme-brown transition-all bg-white">
        <span class="font-bold text-theme-text">é–±è®€ç¾å®¹æœå‹™æ¢æ¬¾</span>
        <span id="terms-status" class="text-xs px-3 py-1 rounded-full bg-gray-100 text-gray-400">å¾…é–±è®€</span>
    </button>
    <!-- âœ… æ¢æ¬¾å¿…å¡«ç”¨ï¼ˆéš±è—ä½†å¯é©—è­‰ï¼‰ -->
    <input type="text" id="terms-confirm" class="sr-only" required>

<!-- ç°½å -->
<div class="space-y-2">
    <label class="block text-sm font-bold">æ•¸ä½ç°½å</label>

    <!-- âœ… ç°½åæŒ‰éˆ• (æœªç°½æ™‚é¡¯ç¤º) -->
    <button type="button" id="open-sign-btn"
        class="w-full h-28 border-2 border-dashed rounded-xl flex flex-col items-center justify-center gap-1 text-theme-sub hover:border-theme-brown transition signature-locked">
        <span class="font-bold">é»æ“Šé–‹å•Ÿç°½åæ¿</span>
        <span id="signature-lock-tip" class="text-[11px] font-bold text-red-500">è«‹å…ˆé–±è®€æ¢æ¬¾ä»¥è§£é–ç°½å</span>
    </button>

<div id="signature-preview" class="hidden relative bg-white p-4 rounded-xl border-2 border-theme-brown/20">
    <!-- âœ… å³ä¸Šè§’åƒåœ¾æ¡¶é‡ç°½æŒ‰éˆ• -->
    <button type="button" id="resign-btn"
        class="absolute top-2 right-2 inline-flex items-center gap-1 px-2 py-1 rounded-full bg-white/90 border border-red-200 text-red-500 text-xs font-bold shadow-sm hover:bg-red-50 transition">
        <i data-lucide="trash-2" class="w-4 h-4"></i>
        é‡ç°½
    </button>
    <img id="signature-img" class="max-h-[160px] mx-auto">
</div>
    <!-- âœ… ç°½ç½²ç‹€æ…‹ -->
<div id="signature-status" class="hidden text-xs flex items-center justify-between mt-2 text-[#B78A4C]">
  <span class="inline-flex items-center gap-1 font-bold">
    <i data-lucide="check-circle-2" class="w-4 h-4 text-[#D2A96A]"></i>
    å·²ç°½ç½²
  </span>
  <span id="signature-time" class="font-medium text-[#B78A4C]">ç°½ç½²æ™‚é–“ï¼š--</span>
</div>
    <input type="hidden" id="signature-data" name="signature_data">
<!-- âœ… ç°½åå¿…å¡«ç”¨ï¼ˆéš±è—ä½†å¯é©—è­‰ï¼‰ -->
<input type="text" id="signature-required" class="sr-only" required>
</div>
</div>
                <button type="submit" class="submit-btn w-full text-white font-bold text-lg tracking-widest py-4 rounded-2xl transition-all">
                    ç¢ºèªä¸¦æäº¤ç°½ç½²
                </button>
            </form>
        </div>

    </main>
    <!-- âœ… åƒ¹ç›®è¡¨ç‡ˆç®± -->
    <div id="price-lightbox" class="lightbox">
        <div class="lightbox-content">
            <button class="lightbox-close" onclick="closeLightbox()">
                âœ•
            </button>
            <img id="price-lightbox-img" src="" alt="åƒ¹ç›®è¡¨æ”¾å¤§é è¦½">
        </div>
    </div>
<script>
    lucide.createIcons();

    function switchView(viewId, push = true) {
        document.querySelectorAll('.view-section').forEach(el => {
            el.classList.remove('active');
            setTimeout(() => { if(!el.classList.contains('active')) el.style.display = 'none'; }, 400);
        });

        const target = document.getElementById('view-' + viewId);
        if (target) {
            target.style.display = 'block';
            setTimeout(() => target.classList.add('active'), 50);
            window.scrollTo({ top: 0, behavior: 'smooth' });

            if (push) {
                location.hash = viewId;
            }
        }

        // âœ… æ§åˆ¶ NAVï¼šHome éš±è—ã€Grooming é¡¯ç¤º
        const nav = document.getElementById('main-nav');
        if (nav) {
            if (viewId === 'home') {
                nav.classList.add('hidden');
            } else {
                nav.classList.remove('hidden');
            }
        }
    }

    window.addEventListener("hashchange", () => {
        const hash = location.hash.replace("#", "") || "home";
        switchView(hash, false);
    });

    function openLightbox(src) {
        const lb = document.getElementById('price-lightbox');
        const img = document.getElementById('price-lightbox-img');
        img.src = src;
        lb.classList.add('show');
        document.body.style.overflow = 'hidden';
    }

    function closeLightbox() {
        const lb = document.getElementById('price-lightbox');
        lb.classList.remove('show');
        document.body.style.overflow = '';
    }

    document.addEventListener("DOMContentLoaded", () => {
        const hash = location.hash.replace("#", "") || "home";
        switchView(hash, false);
// âœ… é‡ç°½æŒ‰éˆ•é‚è¼¯
document.getElementById("resign-btn").onclick = () => {
    document.getElementById("signature-data").value = "";
    document.getElementById("signature-required").value = "";
    document.getElementById("signature-preview").classList.add("hidden");
    document.getElementById("signature-status").classList.add("hidden");

    document.getElementById("open-sign-btn").classList.remove("hidden");
    document.getElementById("resign-btn").classList.add("hidden");
};
        // âœ… åƒ¹ç›®è¡¨ç‡ˆç®±
        document.getElementById('price-lightbox').addEventListener('click', function(e) {
            if (e.target.id === 'price-lightbox') closeLightbox();
        });
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeLightbox();
        });

        // âœ… å¹´é½¡åˆ‡æ›
        const ageOver = document.getElementById("age-over");
        const ageUnder = document.getElementById("age-under");
        const ageYear = document.getElementById("age-year");
        const ageMonth = document.getElementById("age-month");

        document.querySelectorAll(".age-btn").forEach(btn => {
            btn.addEventListener("click", () => {
                document.querySelectorAll(".age-btn").forEach(b => {
                    b.classList.remove("active", "bg-theme-brown", "text-white");
                    b.classList.add("bg-white", "text-theme-sub");
                });

                btn.classList.add("active", "bg-theme-brown", "text-white");
                btn.classList.remove("bg-white", "text-theme-sub");

                if (btn.dataset.age === "over") {
                    ageOver.classList.remove("hidden");
                    ageUnder.classList.add("hidden");
                    ageYear.required = true;
                    ageMonth.required = false;
                    ageMonth.value = "";
                } else {
                    ageOver.classList.add("hidden");
                    ageUnder.classList.remove("hidden");
                    ageYear.required = false;
                    ageYear.value = "";
                    ageMonth.required = true;
                }
            });
        });

        // âœ… é è¨­ä¸€æ­²ä»¥ä¸Šå¿…å¡«
        ageYear.required = true;

        // âœ… ç‹—/è²“åˆ‡æ›é¡¯ç¤ºã€Œèˆ‡ç‹—ç›¸è™•ã€
        document.querySelectorAll("input[name='pet_type']").forEach(r => {
            r.addEventListener("change", () => {
                if (r.value === "dog") {
                    document.getElementById("dog-social").classList.remove("hidden");
                } else {
                    document.getElementById("dog-social").classList.add("hidden");
                }
            });
        });

        // âœ… ç—…å²é¡¯ç¤º
        document.querySelectorAll("input[name='history']").forEach(r => {
            r.addEventListener("change", () => {
                if (r.value === "yes") {
                    document.getElementById("history-list").classList.remove("hidden");
                } else {
                    document.getElementById("history-list").classList.add("hidden");
                    document.getElementById("history-other-input").classList.add("hidden");
                }
            });
        });

        // âœ… å…¶ä»–ç—…å²
        document.querySelectorAll(".history-btn").forEach(btn => {
            btn.addEventListener("click", () => {
                btn.classList.toggle("active");
                btn.classList.toggle("bg-theme-brown");
                btn.classList.toggle("text-white");
                if (btn.dataset.other) {
                    document.getElementById("history-other-input").classList.toggle("hidden");
                }
            });
        });

        // âœ… æ™¶ç‰‡è™Ÿç¢¼é¡¯ç¤º
        document.querySelectorAll("input[name='chip']").forEach(r => {
            r.addEventListener("change", () => {
                const chipInput = document.getElementById("chip-number-input");
                if (r.value === "has") {
                    chipInput.classList.remove("hidden");
                } else {
                    chipInput.classList.add("hidden");
                    chipInput.value = "";
                }
            });
        });
// âœ… çš®è†šç‹€æ³ã€Œå…¶ä»–ã€é¡¯ç¤ºè¼¸å…¥æ¡†
document.querySelectorAll("input[name='skin']").forEach(r => {
    r.addEventListener("change", () => {
        const otherInput = document.getElementById("skin-other-input");
        if (r.value === "other") {
            otherInput.classList.remove("hidden");
        } else {
            otherInput.classList.add("hidden");
            otherInput.value = "";
        }
    });
});
// âœ… æ³¨æ„äº‹é …ã€Œå…¶ä»–ã€é¡¯ç¤ºè¼¸å…¥æ¡†
const attentionOtherCheck = document.getElementById("attention-other-check");
const attentionOtherInput = document.getElementById("attention-other-input");
if (attentionOtherCheck) {
    attentionOtherCheck.addEventListener("change", () => {
        if (attentionOtherCheck.checked) {
            attentionOtherInput.classList.remove("hidden");
        } else {
            attentionOtherInput.classList.add("hidden");
            attentionOtherInput.value = "";
        }
    });
}

// âœ… æ´—æ¾¡é »ç‡ã€Œå…¶ä»–ã€é¡¯ç¤ºè¼¸å…¥æ¡†
document.querySelectorAll("input[name='bath']").forEach(r => {
    r.addEventListener("change", () => {
        const bathOtherInput = document.getElementById("bath-other-input");
        if (r.value === "other") {
            bathOtherInput.classList.remove("hidden");
        } else {
            bathOtherInput.classList.add("hidden");
            bathOtherInput.value = "";
        }
    });
});
        // âœ… æ¢æ¬¾ + ç°½å
        let termsRead = false;
        let sigPad = null;

        const openTermsBtn = document.getElementById("open-terms-btn");
        const termsModal = document.getElementById("terms-modal");
        const termsContent = document.getElementById("terms-content");
        const termsAgree = document.getElementById("terms-agree");
        const termsStatus = document.getElementById("terms-status");

        if (!openTermsBtn) return;

        openTermsBtn.onclick = () => {
            termsModal.classList.add("show");
            document.body.style.overflow = "hidden";
            termsContent.scrollTop = 0;
            termsAgree.disabled = true;

            // âœ… å…§å®¹å¤ªçŸ­å°±ç›´æ¥è§£é–
            setTimeout(() => {
                if (termsContent.scrollHeight <= termsContent.clientHeight + 5) {
                    termsAgree.disabled = false;
                }
            }, 200);
        };

        document.getElementById("terms-close").onclick = () => {
            termsModal.classList.remove("show");
            document.body.style.overflow = "";
        };

        termsContent.addEventListener("scroll", () => {
            const { scrollTop, scrollHeight, clientHeight } = termsContent;
            if (scrollHeight - scrollTop - clientHeight < 30) {
                termsAgree.disabled = false;
            }
        });

termsAgree.onclick = () => {
    termsRead = true;
    termsModal.classList.remove("show");
    document.body.style.overflow = "";
    termsStatus.textContent = "å·²å®Œæˆ";
    termsStatus.className = "text-xs px-3 py-1 rounded-full bg-theme-brown text-white";

    // âœ… æ¢æ¬¾é©—è­‰æˆåŠŸ
    document.getElementById("terms-confirm").value = "ok";
    updateSignatureLock();
};
function updateSignatureLock() {
    const btn = document.getElementById("open-sign-btn");
    const tip = document.getElementById("signature-lock-tip");
    if (!btn) return;

    if (termsRead) {
        btn.classList.remove("signature-locked");
        if (tip) tip.classList.add("hidden");
    } else {
        btn.classList.add("signature-locked");
        if (tip) tip.classList.remove("hidden");
    }
}
updateSignatureLock();
        // âœ… ä¸€æ¬¡é¡¯ç¤ºæ‰€æœ‰å¿…å¡«éŒ¯èª¤ (å«æ¢æ¬¾+ç°½å)
        const form = document.getElementById("grooming-form");

        function clearAllErrors() {
            document.querySelectorAll(".field-error-message").forEach(el => el.remove());
            document.querySelectorAll(".field-error").forEach(el => el.classList.remove("field-error"));
            document.querySelectorAll(".pill-error").forEach(el => el.classList.remove("pill-error"));
            document.querySelectorAll(".choice-error").forEach(el => el.classList.remove("choice-error"));
            document.querySelectorAll(".field-error-btn").forEach(el => el.classList.remove("field-error-btn"));
        }

        function showError(input, message) {
            if (!input) return;

            // âœ… æ¢æ¬¾ / ç°½å ç‰¹æ®Šé¡¯ç¤º
            if (input.id === "terms-confirm") {
                const btn = document.getElementById("open-terms-btn");
                btn.classList.add("field-error-btn");
                if (!btn.parentElement.querySelector(".field-error-message[data-for='terms-confirm']")) {
                    const msg = document.createElement("div");
                    msg.className = "field-error-message";
                    msg.dataset.for = "terms-confirm";
                    msg.textContent = "è«‹å…ˆé–±è®€ä¸¦åŒæ„æ¢æ¬¾";
                    btn.parentElement.appendChild(msg);
                }
                return;
            }
            if (input.id === "signature-required") {
                const btn = document.getElementById("open-sign-btn");
                btn.classList.add("field-error-btn");
                if (!btn.parentElement.querySelector(".field-error-message[data-for='signature-required']")) {
                    const msg = document.createElement("div");
                    msg.className = "field-error-message";
                    msg.dataset.for = "signature-required";
                    msg.textContent = "è«‹å…ˆå®Œæˆç°½å";
                    btn.parentElement.appendChild(msg);
                }
                return;
            }

            if (input.type === "radio" || input.type === "checkbox") {
                document.querySelectorAll(`input[name="${input.name}"]`).forEach(i => {
                    const label = i.closest("label");
                    if (label) {
                        label.classList.add("pill-error");
                        if (label.classList.contains("choice-card")) label.classList.add("choice-error");
                    }
                });
            } else {
                input.classList.add("field-error");
            }

            let container = input.closest(".space-y-2") || input.closest(".space-y-4") || input.closest(".space-y-6") || input.closest(".card-panel");
            if (!container) {
                const flex = input.closest(".flex");
                container = flex ? flex.parentElement : input.parentElement;
            }

            const key = input.name || input.id;
            if (container && !container.querySelector(`.field-error-message[data-for="${key}"]`)) {
                const msg = document.createElement("div");
                msg.className = "field-error-message";
                msg.dataset.for = key;
                msg.textContent = message;
                container.appendChild(msg);
            }
        }

        function clearFieldError(input) {
            if (!input) return;

            if (input.id === "terms-confirm" || input.id === "signature-required") return;

            if (input.type === "radio" || input.type === "checkbox") {
                document.querySelectorAll(`input[name="${input.name}"]`).forEach(i => {
                    const label = i.closest("label");
                    if (label) {
                        label.classList.remove("pill-error");
                        label.classList.remove("choice-error");
                    }
                });
            } else {
                input.classList.remove("field-error");
            }

            const key = input.name || input.id;
            document.querySelectorAll(`.field-error-message[data-for="${key}"]`).forEach(m => m.remove());
        }

        form.addEventListener("submit", (e) => {
            clearAllErrors();

            const invalids = Array.from(form.querySelectorAll(":invalid"));

            if (invalids.length > 0) {
                invalids.forEach(input => {
                    let msg = "æ­¤æ¬„ä½å¿…å¡«";
                    if (input.validity.patternMismatch || input.validity.typeMismatch) msg = "æ ¼å¼ä¸æ­£ç¢º";
                    showError(input, msg);
                });

                invalids[0].scrollIntoView({ behavior: "smooth", block: "center" });
                e.preventDefault();
                return;
            }
        });
                // âœ… ä¸€å‹¾å°±è‡ªå‹•å–æ¶ˆç´…è‰²æç¤º
        form.querySelectorAll("input, select, textarea").forEach(el => {
            el.addEventListener("input", () => clearFieldError(el));
            el.addEventListener("change", () => clearFieldError(el));
        });
// --- ç°½å ---
const sigModal = document.getElementById("signature-modal");
const sigCanvas = document.getElementById("sig-canvas");

let savedScrollY = 0;
let preventScroll = null;

// âœ… é–‹å•Ÿç°½åæ¿
document.getElementById("open-sign-btn").onclick = () => {
    if (!termsRead) {
        const tip = document.getElementById("signature-lock-tip");
        if (tip) tip.classList.remove("hidden");

        const btn = document.getElementById("open-sign-btn");
        btn.classList.add("lock-shake");
        setTimeout(() => btn.classList.remove("lock-shake"), 400);

        document.getElementById("open-terms-btn")?.scrollIntoView({ behavior:"smooth", block:"center" });
        return;
    }

    savedScrollY = window.scrollY;
    sigModal.classList.add("show");

    // âœ… é–æ­»èƒŒæ™¯æ»¾å‹•
    document.body.style.overflow = "hidden";
    document.body.style.position = "fixed";
    document.body.style.top = `-${savedScrollY}px`;
    document.body.style.width = "100%";

    // âœ… é˜»æ­¢ touchmove é€ æˆç•«é¢æ»‘å‹•
    preventScroll = (e) => {
        if (e.target.closest("#signature-modal")) {
            e.preventDefault();
        }
    };
    document.addEventListener("touchmove", preventScroll, { passive: false });

    setTimeout(() => {
        const ratio = window.devicePixelRatio || 1;
        sigCanvas.width = sigCanvas.offsetWidth * ratio;
        sigCanvas.height = sigCanvas.offsetHeight * ratio;
        sigCanvas.getContext("2d").scale(ratio, ratio);

        sigPad = new SignaturePad(sigCanvas, {
            minWidth: 2,
            maxWidth: 4,
            penColor: "#7C604E"
        });
    }, 100);
};

// âœ… é—œé–‰ç°½åæ¿
document.getElementById("sig-close").onclick = () => closeSigModal();

// âœ… æ¸…é™¤ç°½å
document.getElementById("sig-clear").onclick = () => sigPad?.clear();

// âœ… ç¢ºèªç°½å
document.getElementById("sig-save").onclick = () => {
    if (sigPad?.isEmpty()) {
        alert("è«‹å…ˆç°½å");
        return;
    }

    const data = sigPad.toDataURL();
    document.getElementById("signature-data").value = data;
        document.getElementById("signature-required").value = "ok";
    document.getElementById("signature-img").src = data;
    document.getElementById("signature-preview").classList.remove("hidden");

const now = new Date();
const timeStr = now.toLocaleString("zh-TW", {
    timeZone: "Asia/Taipei",
    year: "numeric",
    month: "2-digit",
    day: "2-digit",
    hour: "2-digit",
    minute: "2-digit",
    second: "2-digit",
    hour12: false
});
document.getElementById("signature-time").textContent = `ç°½ç½²æ™‚é–“ï¼š${timeStr}`;
    document.getElementById("signature-status").classList.remove("hidden");

    document.getElementById("open-sign-btn").classList.add("hidden");
    document.getElementById("resign-btn").classList.remove("hidden");

    closeSigModal();
};

// âœ… å…±ç”¨é—œé–‰åŠŸèƒ½
function closeSigModal(){
    sigModal.classList.remove("show");

    document.body.style.overflow = "";
    document.body.style.position = "";
    document.body.style.top = "";
    document.body.style.width = "";
    window.scrollTo(0, savedScrollY || 0);

    if (preventScroll) {
        document.removeEventListener("touchmove", preventScroll);
    }
}

// âœ… ç•«å¸ƒå°ºå¯¸è®ŠåŒ–æ™‚é‡æ–°èª¿æ•´
window.addEventListener("resize", () => {
    if (!sigModal.classList.contains("show")) return;
    const ratio = window.devicePixelRatio || 1;
    sigCanvas.width = sigCanvas.offsetWidth * ratio;
    sigCanvas.height = sigCanvas.offsetHeight * ratio;
    sigCanvas.getContext("2d").scale(ratio, ratio);
    sigPad?.clear();
});
}); 

</script>
<!-- æ¢æ¬¾ Modal -->
<div id="terms-modal" class="terms-modal">
    <div class="terms-box">
        <div class="p-4 bg-theme-brown text-white font-bold flex justify-between items-center">
            <span>ç¾å®¹æœå‹™æ¢æ¬¾</span>
            <button id="terms-close" class="text-white">âœ•</button>
        </div>
        <div id="terms-content" class="terms-body text-sm leading-relaxed space-y-3">
            <p>1. é£¼ä¸»éœ€å¦‚å¯¦å‘ŠçŸ¥æ¯›å­©å¥åº·ç‹€æ³ã€‚</p>
            <p>2. è‹¥æœ‰éš±çç—…å²å°è‡´æ„å¤–ï¼Œé£¼ä¸»éœ€è‡ªè¡Œè² è²¬ã€‚</p>
            <p>3. ç¾å®¹éç¨‹è‹¥å‡ºç¾æ”»æ“Šè¡Œç‚ºï¼Œåº—å®¶æœ‰æ¬Šä¸­æ­¢æœå‹™ã€‚</p>
            <p>4. ç¾å®¹å®Œæˆå¾Œå¦‚ç„¡ç•°è­°å³è¦–ç‚ºæœå‹™å®Œæˆã€‚</p>
            <p>5. è‹¥æœ‰å‚³æŸ“ç—…ã€å¯„ç”ŸèŸ²ï¼Œå°‡æ‹’çµ•æœå‹™ã€‚</p>
            <p>6. ä»¥ä¸Šæ¢æ¬¾å‡è¦–ç‚ºé›™æ–¹åŒæ„éµå®ˆã€‚</p>
            <p>â€» è«‹æ»‘åˆ°åº•éƒ¨æ‰èƒ½é»é¸åŒæ„</p>
            <div style="height:50px"></div>
        </div>
        <div class="terms-footer">
            <button id="terms-agree" class="w-full py-3 rounded-xl font-bold bg-theme-brown text-white" disabled>
                æˆ‘å·²é–±è®€ä¸¦åŒæ„
            </button>
        </div>
    </div>
</div>

<!-- âœ… ç°½åæ¿ Modal -->
<div id="signature-modal" class="sig-modal">
    <div class="sig-header">
        <span>è«‹åœ¨æ­¤ç°½å</span>
        <button id="sig-close">âœ•</button>
    </div>
    <div class="sig-canvas-wrap">
        <canvas id="sig-canvas" class="sig-canvas"></canvas>
    </div>
    <div class="p-4 bg-white border-t flex gap-3">
        <button id="sig-clear" class="flex-1 py-3 bg-gray-100 rounded-xl font-bold">é‡å¯«</button>
        <button id="sig-save" class="flex-[2] py-3 bg-theme-brown text-white rounded-xl font-bold">ç¢ºèªç°½å</button>
    </div>
</div>
</div>
</body>
</html>
